tosca_definitions_version: tosca_simple_yaml_1_0

node_types:

  tosca.nodes.PhysicalResource:
    # Equates to PhysicalResourceSpec in TM Forum Information Model (SID)
    derived_from: tosca.nodes.Root
    attributes: 
      # uses option 4 from stage5 i.e. the SID model is flattened
      modelNumber:
        type: string
        required: false
      vendorName:
        type: string
        required: true
      skuNumber:
        type: string
        required: false
      partNumber:
        type: string
        required: true
    
  tosca.nodes.PhysicalResource.Hardware:
    derived_from: tosca.nodes.PhysicalResource

  tosca.nodes.PhysicalResource.Hardware.PhysicalPort:
    derived_from: tosca.nodes.PhysicalResource.Hardware
    capabilities:
      link:
        type: tosca.capabilities.network.Linkable

  tosca.nodes.PhysicalResource.Hardware.ManagedHardware:
    derived_from: tosca.nodes.PhysicalResource.Hardware

  tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer:
    derived_from: tosca.nodes.PhysicalResource.Hardware.ManagedHardware

  tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment:
    derived_from: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer

  tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment.Card:
    derived_from: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment

  tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.EquipmentHolder:
    derived_from: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer

  tosca.nodes.Compute.NetworkDevice:
    derived_from: tosca.nodes.Compute
    # provides level of indirection between SoftwareComponent and Processor-card

  tosca.nodes.CompoundResource:
    derived_from: tosca.nodes.Root
    properties:
      property1:
        type: string
      property2:
          type: integer
    attributes:
      attribute1:
        type: float
      attribute2:
        type: boolean

description: Template for physical router within a tosca node.network
topology_template:
  node_templates:

    my_port:
      type: tosca.nodes.PhysicalResource.Hardware.PhysicalPort
      # capabilities:
          # linkable is inherited
      attributes:
          # Note we do not want a value for vendor and part number here
      requirements:
        - dependency: router_software
        - dependency: port_card

    router_software:
      type: tosca.nodes.SoftwareComponent
      #capabilities: timos
      requirements:
        - host: device_compute
            
    device_compute:
      type: tosca.nodes.Compute.NetworkDevice
      requirements:
        - dependency: processor_card

    processor_card:
      type: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment.Card
      requirements:
        - dependency: slot
      attributes:
        vendorName: Acme
        partNumber: 123

    port_card:
      type: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment.Card
      requirements:
        - dependency: slot
      attributes:
        vendorName: Acme
        partNumber: 456

    slot:
      type: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.EquipmentHolder
      requirements:
        - dependency: chassis
      attributes:
        vendorName: Acme
        partNumber: 789

    chassis:
      type: tosca.nodes.PhysicalResource.Hardware.ManagedHardware.PhysicalContainer.Equipment
      attributes:
        vendorName: Acme
        partNumber: 001

    router:
      type: tosca.nodes.CompoundResource
      properties:
        property1: a
        property2: 1
      attributes:
        attribute1: 2.0
        attribute2: true
      requirements:
        - dependency: router_software
        - dependency: chassis


