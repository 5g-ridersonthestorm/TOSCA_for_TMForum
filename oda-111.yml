
tosca_definitions_version: tosca_simple_yaml_1_0
#This aligns to slide 19 



dsl_definitions:
# Create a yaml alias for parts of the TMForum Information Model which are frequently reused 
  PhysicalResourceSpecAttributes: &PhysicalResourceSpecAttributes
    vendorName:
      type: string
    partNumber:
      type: string

node_types:
  tosca.nodes.Root.PhysicalResourceHardware:
    derived_from: tosca.nodes.Root
  

  tosca.nodes.Root.PhysicalResourceHardware.PhysicalPort:
    derived_from: tosca.nodes.Root.PhysicalResourceHardware
    capabilities:
      link:
        type: tosca.capabilities.network.Linkable



description: Template for physical router within a tosca node.network
topology_template:
  node_templates:

    my_port:
      type: tosca.nodes.Root.PhysicalResourceHardware.PhysicalPort
      # capabilities:
          # linkable is inherited
      requirements:
        - binding: 
            node: router_software
        - host: 
            capability: tosca.capabilities.?
            node: port_card
            relationship: HostedOn
            
    router_software:
      type: tosca.nodes.SoftwareComponent
      # capabilities:
          # bindable is inherited
      requirements:
        # as type is SoftwareComponent, host must be of type Compute
        - host: processor

    processor:
      type: tosca.nodes.Compute
      attributes: *PhysicalResourceSpecAttributes
      requirements:
      #  processor_card
    
    processor_card:
      type: #Not yet defined
      attributes: *PhysicalResourceSpecAttributes
      requirements:
      #  - host: slot

    port_card:
      type: # Not yet defined
      capabilities: tosca.capabilities.containsNetworkPorts
      attributes: *PhysicalResourceSpecAttributes
      requirements:
        - host: slot

    slot:
      type: # Not yet defined
      requirements:
        - host: chassis

    chassis:
      type: # Not yet defined
      attributes: *PhysicalResourceSpecAttributes

    router:
      type: # Not yet defined 
      properties:
        property1:
          type: string
        property2:
          type: integer
      attributes:
        attribute1:
          type: float
        attribute2:
          type: boolean
        requirements:
          - running_software:
            node: router_software
            relationship: ConnectsTo
          - contained_chassis:
            node: chassis
            relationship: ConnectsTo


